<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- ICON -->
    <link rel="icon" href="../assets/favicon.ico" sizes="32x32" type="image/vnd.microsoft.icon">
    <!-- TITLE -->
    <title>Bhutan - Landslide Risk Report</title>
    
    <!-- CHARTJS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

    <!-- CALCITE -->
    <script type="module" src="https://js.arcgis.com/calcite-components/2.6.0/calcite.esm.js"></script>
    <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/calcite-components/2.6.0/calcite.css"/>
    
    <!-- ArcGIS API -->
    <link href="https://js.arcgis.com/4.29/@arcgis/core/assets/esri/themes/light/main.css" rel="stylesheet"/>
    <script src="https://js.arcgis.com/4.29/"></script>
    
    <!-- APPLICATION CSS -->
    <link rel="stylesheet" type="text/css" href="../css/report.css">
    <script src="../js/Report.js" type="module"></script>
</head>

<body class="calcite-mode-light">
    <div class="report-controls">
        <calcite-button id="btnPrint" icon-start="print">Print Report</calcite-button>
        <calcite-button id="btnDownload" icon-start="download">Download PDF</calcite-button>
    </div>
    
    <div class="report-container">
        <div class="report-header">
            <div class="logo-row">
                <img src="../assets/cropped-RUB.png" alt="Royal University of Bhutan" class="logo">
                <img src="../assets/JNEC-Logo.png" alt="Jigme Namgyel Engineering College" class="logo">
                <h1>Bhutan Landslide Risk Assessment Report</h1>
            </div>
            <div class="report-meta">
                <calcite-chip icon="calendar" scale="s" id="today-date"></calcite-chip>
                <calcite-chip icon="user" scale="s">Generated by DSS</calcite-chip>
            </div>
        </div>
        
        <div class="report-body">
            <h2 id="admin-node"></h2>
            
            <!-- SUMMARY SECTION -->
            <calcite-block open heading="Risk Summary">
                <p>
                    The Landslide Risk Index rating for <b><span id="admin-sum-name"></span></b> is currently assessed as 
                    <b><span id="summary-class"></span></b> with a score of <b><span id="summary-score"></span> out of 10.</b> 
                    This rating reflects the level of landslide risk within the region compared to other areas in Bhutan.
                </p>
                
                <div class="chart-container">
                    <canvas id="dimensions-bar-chart"></canvas>
                </div>
                
                <div class="map-container">
                    <div id="viewRisk" class="map-node"></div>
                    <div id="legendRisk" class="legend-node"></div>
                </div>
                
                <p>
                    The Landslide Risk Index is calculated based on three dimensions: Hazard, Vulnerability, and Exposure, which provide 
                    insight into the factors contributing to this rating.
                </p>
            </calcite-block>
            
            <!-- HAZARD SECTION -->
            <calcite-block open heading="Landslide Hazard">
                <p>
                    The Landslide Hazard index rating is <b><span id="hz-class"></span> (<span id="hz-risk-score"></span>)</b> 
                    for <b><span id="hz-admin-name"></span></b> when compared to the rest of Bhutan.
                </p>
                
                <div class="map-container">
                    <div id="viewHZ" class="map-node"></div>
                    <div id="legendHZ" class="legend-node"></div>
                </div>
                
                <div class="chart-container">
                    <canvas id="hz-chart-node"></canvas>
                </div>
                
                <table class="report-table">
                    <tr>
                        <th>Hazard Factor</th>
                        <th>Score</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td id="hz-name1">Slope Angle</td>
                        <td id="hz-score1">-.-</td>
                        <td>Derived from DEM analysis</td>
                    </tr>
                    <tr>
                        <td id="hz-name2">Soil Type</td>
                        <td id="hz-score2">-.-</td>
                        <td>Geological survey data</td>
                    </tr>
                    <tr>
                        <td id="hz-name3">Rainfall Intensity</td>
                        <td id="hz-score3">-.-</td>
                        <td>Meteorological data</td>
                    </tr>
                    <tr>
                        <td id="hz-name4">Land Use</td>
                        <td id="hz-score4">-.-</td>
                        <td>Satellite imagery analysis</td>
                    </tr>
                </table>
            </calcite-block>
            
            <!-- VULNERABILITY SECTION -->
            <calcite-block open heading="Vulnerability">
                <p>
                    The Vulnerability index rating is <b><span id="vu-class"></span> (<span id="vu-risk-score"></span>)</b> 
                    for <b><span id="vu-admin-name"></span></b> when compared to the rest of Bhutan.
                </p>
                
                <div class="map-container">
                    <div id="viewVU" class="map-node"></div>
                    <div id="legendVU" class="legend-node"></div>
                </div>
                
                <div class="chart-container">
                    <canvas id="vu-chart-node"></canvas>
                </div>
                
                <table class="report-table">
                    <tr>
                        <th>Vulnerability Factor</th>
                        <th>Score</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td id="vu-name1">Population Density</td>
                        <td id="vu-score1">-.-</td>
                        <td>2022 National Census</td>
                    </tr>
                    <tr>
                        <td id="vu-name2">Building Materials</td>
                        <td id="vu-score2">-.-</td>
                        <td>Housing survey data</td>
                    </tr>
                    <tr>
                        <td id="vu-name3">Critical Infrastructure</td>
                        <td id="vu-score3">-.-</td>
                        <td>Government records</td>
                    </tr>
                </table>
            </calcite-block>
            
            <!-- EXPOSURE SECTION -->
            <calcite-block open heading="Exposure">
                <p>
                    The Exposure index rating is <b><span id="ep-class"></span> (<span id="ep-risk-score"></span>)</b> 
                    for <b><span id="ep-admin-name"></span></b> when compared to the rest of Bhutan.
                </p>
                
                <div class="map-container">
                    <div id="viewEP" class="map-node"></div>
                    <div id="legendEP" class="legend-node"></div>
                </div>
                
                <div class="chart-container">
                    <canvas id="ep-chart-node"></canvas>
                </div>
                
                <table class="report-table">
                    <tr>
                        <th>Exposure Factor</th>
                        <th>Score</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td id="ep-name1">Road Networks</td>
                        <td id="ep-score1">-.-</td>
                        <td>Transport department data</td>
                    </tr>
                    <tr>
                        <td id="ep-name2">Schools</td>
                        <td id="ep-score2">-.-</td>
                        <td>Education ministry records</td>
                    </tr>
                    <tr>
                        <td id="ep-name3">Health Facilities</td>
                        <td id="ep-score3">-.-</td>
                        <td>Health ministry records</td>
                    </tr>
                </table>
            </calcite-block>
            
            <!-- DISCLAIMER -->
            <calcite-block heading="Disclaimer">
                <p>
                    This report is generated by the Bhutan Landslide Decision Support System (DSS). 
                    The analysis is based on the latest available data and should be used in conjunction 
                    with field verification for planning purposes.
                </p>
            </calcite-block>
        </div>
    </div>
</body>
</html>